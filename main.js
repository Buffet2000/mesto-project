(()=>{"use strict";var e=document.querySelector(".profile__button-edit"),t=document.querySelector("#edit_profile"),n=document.querySelector("#popup_profile"),o=document.querySelector(".profile__name"),r=document.querySelector(".profile__occupation"),u=document.querySelector("#save_profile"),c=document.querySelector("#create"),a=document.querySelector(".profile__button-add"),i=document.querySelector("#popup_place"),l=document.querySelector("#add_new_place"),p=document.querySelector(".popup__input_place-name"),s=document.querySelector(".popup__input_place-link"),d=document.querySelector(".popup__input_name"),m=document.querySelector(".popup__input_occupation"),_=document.querySelectorAll(".popup"),v=document.querySelector(".elements"),y=document.querySelector("#element-template").content,f=document.querySelector("#big_image"),S=document.querySelector(".popup__big-image"),q=document.querySelector(".popup__description"),b=document.querySelector("#edit_avatar"),k=document.querySelector("#popup_avatar"),L=document.querySelector("#save_avatar"),g=document.querySelector(".popup__input_avatar"),E=document.querySelector(".profile__avatar");function C(e){"Escape"===e.key&&h(document.querySelector(".popup_opened"))}function x(e){e.classList.add("popup_opened"),document.addEventListener("keydown",C)}function h(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",C)}function j(e,t){e.prepend(t)}function A(e,t){var n=y.querySelector(".element").cloneNode(!0),o=n.querySelector(".element__image");return n.querySelector(".element__title").textContent=e,o.src=t,o.alt=e,n.querySelector(".element__like").addEventListener("click",(function(e){e.target.classList.toggle("element__like_active")})),n.querySelector(".element__delete").addEventListener("click",(function(){n.remove()})),o.addEventListener("click",(function(){x(f),S.src=t,S.alt=e,q.textContent=e})),n}var B;[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){j(v,A(e.name,e.link))})),_.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&h(e),t.target.classList.contains("popup__close-button")&&h(e)}))})),i.addEventListener("submit",(function(e){e.preventDefault();var t=p.value,n=s.value;j(v,A(t,n)),h(l)})),n.addEventListener("submit",(function(e){e.preventDefault(),o.textContent=d.value,r.textContent=m.value,h(t)})),k.addEventListener("submit",(function(e){var t;e.preventDefault(),t=g.value,E.src=t,h(k)})),a.addEventListener("click",(function(){x(l),p.value="",s.value="",c.classList.add("popup__submit-button_disabled"),c.disabled=!0})),e.addEventListener("click",(function(){x(t),d.value=o.textContent,m.value=r.textContent,u.classList.add("popup__submit-button_disabled"),u.disabled=!0})),b.addEventListener("click",(function(){x(k),L.classList.add("popup__submit-button_disabled"),L.disabled=!0,g.value=""})),B={formSelector:".popup__input-container",inputSelector:".popup__inputs",inputPlaceName:".popup__input_place-name",submitButton:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_error",errorMessage:".popup__input_error-message"},Array.from(document.querySelectorAll(B.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButton);n.forEach((function(r){r.addEventListener("input",(function(){(function(e,t,n){t.validity.valid?(console.log("Valid"),function(e,t,n){var o=e.querySelector("#".concat(t.name,"_error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.inputErrorActiveClass),o.textContent=""}(e,t,n)):(console.log("Invalid"),function(e,t,n,o){var r=e.querySelector("#".concat(t.name,"_error")),u=document.querySelector(o.inputPlaceName);t.classList.add(o.inputErrorClass),r.textContent=n,t===u&&(r.textContent="".concat(t.validationMessage," Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы"))}(e,t,t.validationMessage,n))})(e,r,t),function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))}(n,o,t)}))}))}(e,B)}))})();